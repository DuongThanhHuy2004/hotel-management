<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/fragments/head :: head"></head>

<body class="bg-theme bg-theme2">

<!-- Start wrapper-->
<div id="wrapper">

    <!--Start sidebar-wrapper-->
    <div th:replace="admin/fragments/sidebar :: sidebar"></div>
    <!--End sidebar-wrapper-->

    <!--Start topbar header-->
    <header th:replace="admin/fragments/header :: header"></header>
    <!--End topbar header-->

    <div class="clearfix"></div>
    <div class="content-wrapper">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">User Management</h5>
                    <div class="btn-group float-sm-left">
                        <a th:href="@{/admin/users/new}" class="btn btn-light">Add New User</a>
                    </div>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Username</th>
                            <th scope="col">Full Name</th>
                            <th scope="col">Email</th>
                            <th scope="col">Roles</th>
                            <th scope="col">Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="user : ${users}">
                            <th scope="row" th:text="${user.id}">1</th>
                            <td th:text="${user.username}">admin</td>
                            <td th:text="${user.fullName}">Admin User</td>
                            <td th:text="${user.email}">admin@example.com</td>
                            <td>
                                            <span th:each="role, iterStat : ${user.roles}"
                                                  th:text="${role.name.replace('ROLE_', '')} + (${iterStat.last} ? '' : ', ')">ADMIN</span>
                            </td>
                            <td>
                                <a th:href="@{/admin/users/edit/{id}(id=${user.id})}" class="btn btn-light btn-sm">Edit</a>
                                <a th:href="@{/admin/users/delete/{id}(id=${user.id})}" class="btn btn-danger btn-sm"
                                   onclick="return confirm('Are you sure you want to delete this user?')">Delete</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div><!--End content-wrapper-->
    <!--Start Back To Top Button-->
    <a href="javaScript:void();" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
    <!--End Back To Top Button-->

    <!--start color switcher-->
    <!--end color switcher-->

</div><!--End wrapper-->
</div>
<!--Start footer-->
<footer th:replace="admin/fragments/footer :: footer"></footer>
<!--End footer-->

<!-- Bootstrap core JavaScript-->
<div th:replace="admin/fragments/script :: script"></div>

<form th:action="@{/logout}" method="post" id="logoutForm" style="display: none;"></form>
</body>
</html>
