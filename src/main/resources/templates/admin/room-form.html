<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"> <head th:replace="~{admin/fragments/head :: head}"></head>

<body class="bg-theme bg-theme2">

<div id="wrapper">

    <div th:replace="~{admin/fragments/sidebar :: sidebar}"></div>
    <header th:replace="~{admin/fragments/header :: header}"></header>
    <div class="clearfix"></div>

    <div class="content-wrapper">
        <div class="container-fluid">

            <div class="row pt-2 pb-2">
                <div class="col-sm-9">
                    <h4 class="page-title" th:text="${roomDto.id == null} ? 'Add New Room' : 'Edit Room'">Room Form</h4>
                </div>
                <div class="col-sm-3">
                    <a th:href="@{/admin/rooms}" class="btn btn-light float-sm-right">Back to Rooms</a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">

                            <form th:action="@{/admin/rooms/save}" th:object="${roomDto}" method="post"
                                  enctype="multipart/form-data"> <input type="hidden" th:field="*{id}">

                                <div class="form-group">
                                    <label for="roomNumber">Room Number</label>
                                    <input type="text" class="form-control" id="roomNumber" th:field="*{roomNumber}" required>
                                </div>

                                <div class="form-group">
                                    <label for="roomTypeId">Room Type</label>
                                    <select class="form-control" id="roomTypeId" th:field="*{roomTypeId}" required>
                                        <option value="">-- Select Type --</option>
                                        <option th:each="rt : ${allRoomTypes}"
                                                th:value="${rt.id}"
                                                th:text="${rt.name}">Standard Single</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="price">Price (per night)</label>
                                    <input type="number" step="0.01" class="form-control" id="price" th:field="*{price}" required>
                                </div>

                                <div class="form-group">
                                    <label>Current Image</label>
                                    <div th:if="${roomDto.id != null and roomDto.imageUrl != null}">
                                        <img th:src="@{${roomDto.imageUrl}}" width="150" alt="Current Image">
                                    </div>
                                    <div th:if="${roomDto.id == null or roomDto.imageUrl == null}">
                                        <p>(No image)</p>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="imageFile">Upload New Image</label>
                                    <input type="file" class="form-control" id="imageFile" name="imageFile"
                                           accept="image/png, image/jpeg">
                                    <small th:if="${roomDto.id != null}" class="form-text text-muted">Leave blank to keep the current image.</small>
                                </div>
                                <div class="form-group">
                                    <label for="description">Description</label>
                                    <textarea class="form-control" id="description" th:field="*{description}" rows="3"></textarea>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="isAvailable" th:field="*{available}">
                                    <label class="form-check-label" for="isAvailable">
                                        Is Available
                                    </label>
                                </div>

                                <div class="form-group" style="margin-top: 20px;">
                                    <button type="submit" class="btn btn-light px-5">Save</button>
                                    <a th:href="@{/admin/rooms}" class="btn btn-light px-5">Cancel</a>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div></div>
    </div><a href="javaScript:void();" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
    <footer th:replace="~{admin/fragments/footer :: footer}"></footer>
</div><div th:replace="~{admin/fragments/script :: script}"></div>

<form th:action="@{/logout}" method="post" id="logoutForm" style="display: none;"></form>
</body>
</html>